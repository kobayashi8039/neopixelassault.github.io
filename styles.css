:root { color-scheme: dark; }
* { box-sizing: border-box; touch-action: manipulation; }
body {
  margin: 0; min-height: 100vh; display: grid; place-items: center;
  font-family: 'Courier New', Courier, monospace;
  background: radial-gradient(circle at 30% 20%, #1e3e66 0%, #10142f 45%, #05060f 100%);
  color: #dbf7ff;
}
.game-shell {
  width: min(96vw, 760px); display: flex; flex-direction: column; align-items: center;
  gap: 10px; padding: 14px; border: 3px solid #56ebff;
  box-shadow: 0 0 26px #00e0ff66, inset 0 0 18px #00dcff33; background: #030a18f0;
}
.hud { width: 100%; }
.hud h1 { margin: 0; text-align: center; letter-spacing: 0.2rem; color: #ffe760; }
.stats { margin-top: 8px; display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 6px 10px; font-size: 0.95rem; }
.meters { margin-top: 6px; display: flex; align-items: center; gap: 8px; }
.bomb-meter { display: flex; gap: 4px; margin-left: 6px; }
.bomb-dot { width: 10px; height: 10px; border-radius: 50%; border: 1px solid #8fefff; background: #0f2b44; }
.bomb-dot.active { background: #ff7c9f; box-shadow: 0 0 6px #ff7c9faa; }
progress { width: 100%; height: 14px; accent-color: #ff5b8d; }

.game-area { width: min(96vw, 640px); position: relative; }
canvas {
  width: 100%; border: 2px solid #99ffbf; image-rendering: pixelated;
  background: #040616; touch-action: none; display: block;
}

.menu { width: 100%; border: 2px solid #ffe760; padding: 10px; background: #0c132ab8; }
.menu.hidden { display: none; }
.menu h2 { margin: 0 0 8px; font-size: 1rem; }
.menu-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 8px; }
.menu label { display: grid; gap: 6px; font-size: 0.9rem; }
select, button, input { font-family: inherit; }
.menu-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
button {
  border: 2px solid #56ebff; background: #12213f; color: #dffeff;
  padding: 8px; cursor: pointer;
}
.controls { margin: 0; text-align: center; color: #9effe7; font-size: 0.82rem; }

.touch-hud {
  position: absolute;
  inset: auto 0 10px 0;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  padding: 0 10px;
  pointer-events: none;
}
.touch-hud.hidden { display: none; }
.stick-base {
  width: 108px; height: 108px; border-radius: 50%; border: 3px solid #8ee7ff;
  background: #0d2344c7; position: relative; touch-action: none; pointer-events: auto;
  box-shadow: 0 0 16px #44d9ff55;
}
.stick-knob {
  width: 42px; height: 42px; border-radius: 50%; background: #6cf4ffdd;
  border: 2px solid #fff; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
}
.touch-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  width: 132px;
  height: 132px;
  gap: 4px;
  pointer-events: auto;
}
.touch-btn {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  padding: 0;
  font-weight: bold;
  font-size: 0.62rem;
  touch-action: none;
  background: #102650e3;
  place-self: center;
}
.touch-btn.pos-up { grid-column: 2; grid-row: 1; }
.touch-btn.pos-left { grid-column: 1; grid-row: 2; }
.touch-btn.pos-right { grid-column: 3; grid-row: 2; }
.touch-btn.pos-down { grid-column: 2; grid-row: 3; }
.touch-btn.danger { border-color: #ff809d; color: #ffd0da; }

@media (max-width: 760px) {
  .menu-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .stats { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .touch-hud { inset: auto 0 8px 0; padding: 0 8px; }
  .stick-base { width: 118px; height: 118px; }
  .touch-buttons { width: 120px; }
  .touch-btn { min-height: 40px; font-size: 0.85rem; }
}
